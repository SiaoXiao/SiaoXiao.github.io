import{_ as $,r as o,a as E,o as B,b as S,c as p,d as m,e as I,w as x,F as L,f as N,g as R,v as V,h as X,T as G,i as c,j as P,k as F,l as b,t as Y,p as j,m as q}from"./index.02efa349.js";import{u as A,C as D}from"./index.ddb0dddb.js";const H=["onTouchstart","onTouchend"],O=["src"],U={key:0,class:"slide-ctrl"},W={__name:"Carousel",props:{timer:{type:Boolean,default:!1},timerDelay:{type:Number,default:1e3},nav:{type:Boolean,default:!0}},setup(d){const n=d,C=o(0),f=o("next"),u=o(!1),h=o(null),i=o([{id:"1",src:"https://fakeimg.pl/1024x600/ffedd5?text=1"},{id:"2",src:"https://fakeimg.pl/1024x600/?text=2"},{id:"3",src:"https://fakeimg.pl/1024x600/ffedd5?text=3"},{id:"4",src:"https://fakeimg.pl/1024x600/?text=4"},{id:"5",src:"https://fakeimg.pl/1024x600/ffedd5?text=5"},{id:"6",src:"https://fakeimg.pl/1024x600/?text=6"},{id:"7",src:"https://fakeimg.pl/1024x600/ffedd5?text=7"},{id:"8",src:"https://fakeimg.pl/1024x600/?text=8"}]),k=o(null),e=E({position:{startX:"",endX:"",minX:null,maxX:null,minY:null,maxY:null},mouseClick:{downTime:null,upTime:null}}),v=()=>{h.value=setInterval(()=>{u.value=!1,l(1)},n.timerDelay)},_=()=>{clearInterval(h.value)},l=(t=1)=>{if(!u.value){if(n.timer&&_(),u.value=!0,t>0){f.value="next";const s=i.value.shift();i.value.push(s),n.timer&&v(),u.value=!1;return}if(t<0){f.value="prev";const s=i.value.pop();i.value.unshift(s),n.timer&&v(),u.value=!1;return}}},w=t=>{e.position.startX=t.clientX,e.mouseClick.downTime=new Date().getTime(),n.timer&&_()},g=t=>{const s=e.mouseClick.downTime;e.mouseClick.upTime=new Date().getTime(),e.position.endX=t.clientX;const r=e.mouseClick.upTime,T=e.position.startX,M=e.position.endX;if(r-s>100){if(Math.abs(M-T)<10)return;M>T?l(1):l(-1)}},a=t=>{e.position.startX=t.touches[0].clientX},y=t=>{e.position.endX=t.changedTouches[0].clientX;const s=e.position.startX,r=e.position.endX;Math.abs(r-s)<10||(n.timer&&_(),r>s?l(1):l(-1))};return B(()=>{n.timer&&v()}),S(()=>{clearInterval(h.value)}),(t,s)=>(p(),m("div",{class:"slide",onTouchstart:X(a,["stop","prevent"]),onTouchend:X(y,["stop","prevent"]),onMouseover:_,onMouseleave:v,ref_key:"swiperRef",ref:k},[I(G,{tag:"div",class:"slide-main",name:f.value,onMousedown:X(w,["stop","prevent"]),onMouseup:X(g,["stop","prevent"])},{default:x(()=>[(p(!0),m(L,null,N(i.value,(r,T)=>R((p(),m("img",{key:r.id,src:r.src},null,8,O)),[[V,C.value===T]])),128))]),_:1},8,["name","onMousedown","onMouseup"]),d.nav?(p(),m("div",U,[c("div",{class:"slide-prev",onClick:s[0]||(s[0]=r=>l(-1))},"L"),c("div",{class:"slide-next",onClick:s[1]||(s[1]=r=>l(1))},"R")])):P("",!0)],40,H))}},z=$(W,[["__scopeId","data-v-2180fe19"]]);const J=d=>(j("data-v-f4792821"),d=d(),q(),d),K={class:"image-container"},Q={class:"image-list"},Z=["src"],ee=J(()=>c("span",null,"\u524D\u5F80\u89C0\u770B",-1)),te={__name:"works",setup(d){const n=A(),C=o(4),f=o(1),u=o(0),h=o(0),i=o(null),k=o([]),e=o(!1),v=()=>{u.value+=3,h.value=u.value},_={root:document.querySelector(".image-container"),rootMargin:"-500px 0px 500px 0px",threshold:0,delay:500},l=([a])=>{a&&a.isIntersecting&&w()},w=async()=>{await F.get(`https://picsum.photos/v2/list?page=${f.value}&limit=${C.value}`).then(a=>{if(a.status===200)a.data.forEach(y=>{k.value.push(y)}),f.value+=1,v(),e.value=!0;else{g.unobserve(i.value),e.value=!1;return}}).catch(a=>{console.log(a)})},g=new IntersectionObserver(l,_);return B(async()=>{n.value="WhyGoGo\u7DB2\u7AD9\u8A2D\u8A08\u516C\u53F8 | \u5DE5\u4F5C\u4E00\u89BD",await w(),e.value=!0,g.observe(i.value)}),S(()=>{g.disconnect()}),(a,y)=>(p(),m("main",null,[I(D,null,{title:x(()=>[b("\u4F5C\u54C1\u4E00\u89BD")]),content:x(()=>[I(z,{timer:!0,timerDelay:5e3,nav:!1,class:"card-shadow"})]),_:1}),I(D,null,{title:x(()=>[b("\u7DB2\u9801\u8207APP\u4F5C\u54C1\u6848\u4F8B\u8CDE\u6790")]),content:x(()=>[c("div",K,[c("ul",Q,[(p(!0),m(L,null,N(k.value,t=>(p(),m("li",{key:t.id,class:"image-item shadow"},[c("img",{class:"image",src:t.download_url},null,8,Z),c("div",null,[c("p",null,Y(t.author),1),ee])]))),128))]),R(c("div",{ref_key:"loadingRef",ref:i,class:"animate-spin"},null,512),[[V,e.value]])])]),_:1})]))}},ae=$(te,[["__scopeId","data-v-f4792821"]]);export{ae as default};
