import{_ as D,r as a,a as E,o as B,b as S,c as p,d as f,e as b,w as x,F as L,f as N,g as R,v as V,h as X,T as G,i as n,j as P,k as F,l as M,n as Y,t as j,p as q,m as z}from"./index.37cca1a7.js";import{u as A,C as $}from"./index.e5512f80.js";const H=["onTouchstart","onTouchend"],O=["src"],U={key:0,class:"slide-ctrl"},W={__name:"Carousel",props:{timer:{type:Boolean,default:!1},timerDelay:{type:Number,default:1e3},nav:{type:Boolean,default:!0}},setup(d){const i=d,I=a(0),m=a("next"),u=a(!1),h=a(null),l=a([{id:"1",src:"https://fakeimg.pl/1024x600/ffedd5?text=1"},{id:"2",src:"https://fakeimg.pl/1024x600/?text=2"},{id:"3",src:"https://fakeimg.pl/1024x600/ffedd5?text=3"},{id:"4",src:"https://fakeimg.pl/1024x600/?text=4"},{id:"5",src:"https://fakeimg.pl/1024x600/ffedd5?text=5"},{id:"6",src:"https://fakeimg.pl/1024x600/?text=6"},{id:"7",src:"https://fakeimg.pl/1024x600/ffedd5?text=7"},{id:"8",src:"https://fakeimg.pl/1024x600/?text=8"}]),k=a(null),e=E({position:{startX:"",endX:"",minX:null,maxX:null,minY:null,maxY:null},mouseClick:{downTime:null,upTime:null}}),v=()=>{h.value=setInterval(()=>{u.value=!1,r(1)},i.timerDelay)},_=()=>{clearInterval(h.value)},r=(t=1)=>{if(!u.value){if(i.timer&&_(),u.value=!0,t>0){m.value="next";const s=l.value.shift();l.value.push(s),i.timer&&v(),u.value=!1;return}if(t<0){m.value="prev";const s=l.value.pop();l.value.unshift(s),i.timer&&v(),u.value=!1;return}}},w=t=>{e.position.startX=t.clientX,e.mouseClick.downTime=new Date().getTime(),i.timer&&_()},g=t=>{const s=e.mouseClick.downTime;e.mouseClick.upTime=new Date().getTime(),e.position.endX=t.clientX;const c=e.mouseClick.upTime,T=e.position.startX,C=e.position.endX;if(c-s>100){if(Math.abs(C-T)<10)return;C>T?r(1):r(-1)}},o=t=>{e.position.startX=t.touches[0].clientX},y=t=>{e.position.endX=t.changedTouches[0].clientX;const s=e.position.startX,c=e.position.endX;Math.abs(c-s)<10||(i.timer&&_(),c>s?r(1):r(-1))};return B(()=>{i.timer&&v()}),S(()=>{clearInterval(h.value)}),(t,s)=>(p(),f("div",{class:"slide",onTouchstart:X(o,["stop","prevent"]),onTouchend:X(y,["stop","prevent"]),onMouseover:_,onMouseleave:v,ref_key:"swiperRef",ref:k},[b(G,{tag:"div",class:"slide-main",name:m.value,onMousedown:X(w,["stop","prevent"]),onMouseup:X(g,["stop","prevent"])},{default:x(()=>[(p(!0),f(L,null,N(l.value,(c,T)=>R((p(),f("img",{key:c.id,src:c.src},null,8,O)),[[V,I.value===T]])),128))]),_:1},8,["name","onMousedown","onMouseup"]),d.nav?(p(),f("div",U,[n("div",{class:"slide-prev",onClick:s[0]||(s[0]=c=>r(-1))},"L"),n("div",{class:"slide-next",onClick:s[1]||(s[1]=c=>r(1))},"R")])):P("",!0)],40,H))}},J=D(W,[["__scopeId","data-v-2180fe19"]]);const K=d=>(q("data-v-1bc2e96b"),d=d(),z(),d),Q={class:"image-container"},Z={class:"image-list"},ee={class:"card"},te={class:"card-info"},se=K(()=>n("a",{href:"#",class:"btn"},"\u524D\u5F80\u89C0\u770B",-1)),ae={__name:"works",setup(d){const i=A(),I=a(4),m=a(1),u=a(0),h=a(0),l=a(null),k=a([]),e=a(!1),v=()=>{u.value+=3,h.value=u.value},_={root:document.querySelector(".image-container"),rootMargin:"-500px 0px 500px 0px",threshold:0,delay:500},r=([o])=>{o&&o.isIntersecting&&w()},w=async()=>{await F.get(`https://picsum.photos/v2/list?page=${m.value}&limit=${I.value}`).then(o=>{if(o.status===200)o.data.forEach(y=>{k.value.push(y)}),m.value+=1,v(),e.value=!0;else{g.unobserve(l.value),e.value=!1;return}}).catch(o=>{console.log(o)})},g=new IntersectionObserver(r,_);return B(async()=>{i.value="WhyGoGo\u7DB2\u7AD9\u8A2D\u8A08\u516C\u53F8 | \u5DE5\u4F5C\u4E00\u89BD",await w(),e.value=!0,g.observe(l.value)}),S(()=>{g.disconnect()}),(o,y)=>(p(),f("main",null,[b($,null,{title:x(()=>[M("\u4F5C\u54C1\u4E00\u89BD")]),content:x(()=>[b(J,{timer:!0,timerDelay:5e3,nav:!1,class:"card-shadow"})]),_:1}),b($,null,{title:x(()=>[M("\u7DB2\u9801\u8207APP\u4F5C\u54C1\u6848\u4F8B\u8CDE\u6790")]),content:x(()=>[n("div",Q,[n("ul",Z,[(p(!0),f(L,null,N(k.value,t=>(p(),f("li",{key:t.id,class:"card-wrap"},[n("div",ee,[n("div",{class:"card-bg",style:Y(`background-image: url(${t.download_url})`)},null,4),n("div",te,[n("h3",null,j(t.author),1),se])])]))),128))]),R(n("div",{ref_key:"loadingRef",ref:l,class:"animate-spin"},null,512),[[V,e.value]])])]),_:1})]))}},ie=D(ae,[["__scopeId","data-v-1bc2e96b"]]);export{ie as default};
