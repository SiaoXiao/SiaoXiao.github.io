import{_ as $,r as n,a as G,o as B,b as L,c as d,d as p,e as X,w as h,F as N,f as R,g as V,v as E,h as T,T as P,i as u,j as S,k as F,l as b,t as Y}from"./index.5672a918.js";import{u as j,C as D}from"./index.026bb44d.js";const q=["onTouchstart","onTouchend"],A=["src"],H={key:0,class:"slide-ctrl"},O={__name:"Carousel",props:{timer:{type:Boolean,default:!1},timerDelay:{type:Number,default:1e3},nav:{type:Boolean,default:!0}},setup(C){const o=C,I=n(0),f=n("next"),r=n(!1),_=n(null),c=n([{id:"1",src:"https://fakeimg.pl/1024x600/ffedd5?text=1"},{id:"2",src:"https://fakeimg.pl/1024x600/?text=2"},{id:"3",src:"https://fakeimg.pl/1024x600/ffedd5?text=3"},{id:"4",src:"https://fakeimg.pl/1024x600/?text=4"},{id:"5",src:"https://fakeimg.pl/1024x600/ffedd5?text=5"},{id:"6",src:"https://fakeimg.pl/1024x600/?text=6"},{id:"7",src:"https://fakeimg.pl/1024x600/ffedd5?text=7"},{id:"8",src:"https://fakeimg.pl/1024x600/?text=8"}]),g=n(null),e=G({position:{startX:"",endX:"",minX:null,maxX:null,minY:null,maxY:null},mouseClick:{downTime:null,upTime:null}}),m=()=>{_.value=setInterval(()=>{r.value=!1,i(1)},o.timerDelay)},v=()=>{clearInterval(_.value)},i=(t=1)=>{if(!r.value){if(o.timer&&v(),r.value=!0,t>0){f.value="next";const s=c.value.shift();c.value.push(s),o.timer&&m(),r.value=!1;return}if(t<0){f.value="prev";const s=c.value.pop();c.value.unshift(s),o.timer&&m(),r.value=!1;return}}},x=t=>{e.position.startX=t.clientX,e.mouseClick.downTime=new Date().getTime(),o.timer&&v()},k=t=>{const s=e.mouseClick.downTime;e.mouseClick.upTime=new Date().getTime(),e.position.endX=t.clientX;const l=e.mouseClick.upTime,y=e.position.startX,M=e.position.endX;if(l-s>100){if(Math.abs(M-y)<10)return;M>y?i(1):i(-1)}},a=t=>{e.position.startX=t.touches[0].clientX},w=t=>{e.position.endX=t.changedTouches[0].clientX;const s=e.position.startX,l=e.position.endX;Math.abs(l-s)<10||(o.timer&&v(),l>s?i(1):i(-1))};return B(()=>{o.timer&&m()}),L(()=>{clearInterval(_.value)}),(t,s)=>(d(),p("div",{class:"slide",onTouchstart:T(a,["stop","prevent"]),onTouchend:T(w,["stop","prevent"]),onMouseover:v,onMouseleave:m,ref_key:"swiperRef",ref:g},[X(P,{tag:"div",class:"slide-main",name:f.value,onMousedown:T(x,["stop","prevent"]),onMouseup:T(k,["stop","prevent"])},{default:h(()=>[(d(!0),p(N,null,R(c.value,(l,y)=>V((d(),p("img",{key:l.id,src:l.src},null,8,A)),[[E,I.value===y]])),128))]),_:1},8,["name","onMousedown","onMouseup"]),C.nav?(d(),p("div",H,[u("div",{class:"slide-prev",onClick:s[0]||(s[0]=l=>i(-1))},"L"),u("div",{class:"slide-next",onClick:s[1]||(s[1]=l=>i(1))},"R")])):S("",!0)],40,q))}},U=$(O,[["__scopeId","data-v-2180fe19"]]);const W={class:"image-container"},z={class:"image-list"},J=["src"],K={__name:"works",setup(C){const o=j(),I=n(4),f=n(1),r=n(0),_=n(0),c=n(null),g=n([]),e=n(!1),m=()=>{r.value+=3,_.value=r.value},v={root:document.querySelector(".image-container"),rootMargin:"-500px 0px 500px 0px",threshold:0,delay:500},i=([a])=>{a&&a.isIntersecting&&x()},x=async()=>{await F.get(`https://picsum.photos/v2/list?page=${f.value}&limit=${I.value}`).then(a=>{if(a.status===200)a.data.forEach(w=>{g.value.push(w)}),f.value+=1,m(),e.value=!0;else{k.unobserve(c.value),e.value=!1;return}}).catch(a=>{console.log(a)})},k=new IntersectionObserver(i,v);return B(async()=>{o.value="WhyGoGo\u7DB2\u7AD9\u8A2D\u8A08\u516C\u53F8 | \u5DE5\u4F5C\u4E00\u89BD",await x()}),L(()=>{k.disconnect()}),(a,w)=>(d(),p("main",null,[X(D,null,{title:h(()=>[b("\u4F5C\u54C1\u4E00\u89BD")]),content:h(()=>[X(U,{timer:!0,timerDelay:5e3,nav:!1,class:"card-shadow"})]),_:1}),X(D,null,{title:h(()=>[b("\u7DB2\u9801\u8207APP\u4F5C\u54C1\u6848\u4F8B\u8CDE\u6790")]),content:h(()=>[u("div",W,[u("ul",z,[(d(!0),p(N,null,R(g.value,t=>(d(),p("li",{key:t.id,class:"image-item shadow"},[u("img",{class:"image",src:t.download_url},null,8,J),u("span",null,[u("p",null,Y(t.author),1)])]))),128))]),V(u("div",{ref_key:"loadingRef",ref:c,class:"animate-spin"},null,512),[[E,e.value]])])]),_:1})]))}},ee=$(K,[["__scopeId","data-v-e8ef95f2"]]);export{ee as default};
